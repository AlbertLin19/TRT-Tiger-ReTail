{% extends "marketplace/base.html" %}
{% load cloudinary %}
{% block content %}
    <!--<div class="container">-->
        <div class="topbar header3 justify-content-around" style="display: flex; flex-direction: row;">
            <br />
            <!--<form style="text-align: left; width: 50%;">-->
                <div class="input-group rounded">
                    <input type="search" id="searchbar" placeholder="Search" class="form-control"/>
                <button class="btn btn-secondary" type="submit" onclick="var ret_items=search()"><i class=" fa fa-search"></i></button>
                </div>
            <!--</form>-->
            <div style="text-align: right; width: 50%;">
                <a href="{% url 'list_items' %}" class="btn btn-outline-light" style="font-weight: bold;">MY ITEMS</a>
                <a href="{% url 'new_item' %}" class="btn btn-outline-light" style="font-weight: bold;">POST ITEM</a>
                <a href="{% url 'list_purchases' %}" class="btn btn-outline-light" style="font-weight: bold;">PURCHASES</a>
            </div>
        </div>
    <div class="gallery_back container-fliud mb-3">
        <br>   
        <div class="container">
            <div id="gallery_title"> CURRENT OFFERS </div><hr>
            <div class="row">
                {% for item in ret_items %}
                <div class="card col-12 col-md-4" style="width: 18rem; padding-top: 2%;">
                    <div class="card-img-top rounded-corners">
                        {% cloudinary item.image format="jpg" width=120 height=80 crop="fill"%}
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">{{item.name}}</h5>
                      <p class="card-text">${{item.price}} USD<br>Merchant: {{item.seller}}</p>
                      {% if item.status == Item_AVAILABLE %}
                        <form action="{% url 'new_purchase' %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="pk" value={{item.pk}}>
                            <input type="submit" class="btn btn-success" value="Purchase" style="padding-left: 20px; padding-right: 20px;">
                            <a href="#"type="submit" class="btn btn-secondary" >View Details</a>
                        </form>
                    {% elif item.status == Item_FROZEN %}
                        <p style="color: rgb(212, 67, 31); font-weight: bold; font-size: 20px;">FROZEN</p>
                    {% elif item.status == Item_COMPLETE %}
                        <p style="color: rgb(212, 67, 31); font-weight: bold; font-size: 20px;">SOLD</p>
                    {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock content %}